<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker | 学习笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="仅仅是菜鸡的自我总结">
    
    <link rel="preload" href="/notes/assets/css/0.styles.aa6162e3.css" as="style"><link rel="preload" href="/notes/assets/js/app.e87d8fcf.js" as="script"><link rel="preload" href="/notes/assets/js/2.89b3a823.js" as="script"><link rel="preload" href="/notes/assets/js/13.b154d693.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.81298cf3.js"><link rel="prefetch" href="/notes/assets/js/11.6e883eb1.js"><link rel="prefetch" href="/notes/assets/js/12.a20f13d7.js"><link rel="prefetch" href="/notes/assets/js/14.9c23911f.js"><link rel="prefetch" href="/notes/assets/js/15.00e39b0f.js"><link rel="prefetch" href="/notes/assets/js/3.1ca6419e.js"><link rel="prefetch" href="/notes/assets/js/4.28f1757f.js"><link rel="prefetch" href="/notes/assets/js/5.875d6001.js"><link rel="prefetch" href="/notes/assets/js/6.d5f3e3a9.js"><link rel="prefetch" href="/notes/assets/js/7.8acb74f8.js"><link rel="prefetch" href="/notes/assets/js/8.8ad306da.js"><link rel="prefetch" href="/notes/assets/js/9.62e9a7d6.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.aa6162e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/notes/javascript/探索下es6的class以及继承的原理.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/notes/linux/" class="nav-link router-link-active">
  服务器
</a></div><div class="nav-item"><a href="/notes/sundry/vscode的多项目的工作区配置.html" class="nav-link">
  杂项
</a></div><div class="nav-item"><a href="https://github.com/SignDigit1/notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/notes/javascript/探索下es6的class以及继承的原理.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/notes/linux/" class="nav-link router-link-active">
  服务器
</a></div><div class="nav-item"><a href="/notes/sundry/vscode的多项目的工作区配置.html" class="nav-link">
  杂项
</a></div><div class="nav-item"><a href="https://github.com/SignDigit1/notes" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/notes/linux/" aria-current="page" class="sidebar-link">Linux</a></li><li><a href="/notes/linux/Docker.html" aria-current="page" class="active sidebar-link">Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#docker-常用命令" class="sidebar-link">Docker 常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#镜像命令" class="sidebar-link">镜像命令</a></li><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#容器命令" class="sidebar-link">容器命令</a></li><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#使用数据卷" class="sidebar-link">使用数据卷</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#dockerfile" class="sidebar-link">Dockerfile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#基础" class="sidebar-link">基础</a></li><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#构建镜像" class="sidebar-link">构建镜像</a></li></ul></li><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#docker-compose" class="sidebar-link">Docker Compose</a></li><li class="sidebar-sub-header"><a href="/notes/linux/Docker.html#docker-swarm" class="sidebar-link">Docker Swarm</a></li></ul></li><li><a href="/notes/linux/搭建代理服务器.html" class="sidebar-link">搭建代理服务器</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h1> <p>文档地址</p> <h2 id="docker-常用命令"><a href="#docker-常用命令" class="header-anchor">#</a> Docker 常用命令</h2> <h3 id="镜像命令"><a href="#镜像命令" class="header-anchor">#</a> 镜像命令</h3> <div class="language- extra-class"><pre class="language-text"><code>docker version # 显示docker版本信息
docker info # 显示docker系统信息，包括镜像和容器数量
docker 命令 --help # 显示docker帮助信息

docker images # 显示当前有的镜像
docker search 名称 # 搜索镜像 
docker pull 名称[:tag] # 下载镜像
docker rmi -f # 删除镜像
</code></pre></div><h3 id="容器命令"><a href="#容器命令" class="header-anchor">#</a> 容器命令</h3> <h4 id="启动容器"><a href="#启动容器" class="header-anchor">#</a> 启动容器</h4> <div class="language- extra-class"><pre class="language-text"><code>docker run [可选参数] 容器
#参数说明
--name=&quot;Name&quot; # 为启动的容器命名
-d # 后台运行
-it # 使用交互方式运行，进入容器查看内容
-p # 指定端口
	-p 主机端口:容器端口
	-p ip:主机端口:容器端口
	-p 容器端口
	容器端口
-P # 随机指定端口
-e # 环境配置
</code></pre></div><h4 id="查看运行的容器"><a href="#查看运行的容器" class="header-anchor">#</a> 查看运行的容器</h4> <div class="language- extra-class"><pre class="language-text"><code>docker ps # 列出当前运行的容器
	-a # 查看曾经运行的容器
	-n=? # 显示最近创建的容器
	-q # 只显示容器id
</code></pre></div><h4 id="退出容器"><a href="#退出容器" class="header-anchor">#</a> 退出容器</h4> <div class="language- extra-class"><pre class="language-text"><code>exit # 直接退出容器并停止
ctrl+p+q # 退出不停止
</code></pre></div><h4 id="删除容器"><a href="#删除容器" class="header-anchor">#</a> 删除容器</h4> <div class="language- extra-class"><pre class="language-text"><code>docker rm 容器id # 删除指定容器，不能删除正在运行的容器，强删rm -f
docker rm -f $(docker ps -aq) # 全部删除
</code></pre></div><h4 id="启动和停止容器"><a href="#启动和停止容器" class="header-anchor">#</a> 启动和停止容器</h4> <div class="language- extra-class"><pre class="language-text"><code>docker start 容器id 启动容器
docker restart 容器id 重启容器
docker stop 容器id 停止容器
docker kill 容器id 强制停止容器
</code></pre></div><h4 id="常用其他命令"><a href="#常用其他命令" class="header-anchor">#</a> 常用其他命令</h4> <h5 id="显示日志"><a href="#显示日志" class="header-anchor">#</a> 显示日志</h5> <div class="language- extra-class"><pre class="language-text"><code>docker logs 容器id
	-tf # 显示时间戳并且格式化
	--tail 数字 # 过滤条数
</code></pre></div><h5 id="查看容器元数据"><a href="#查看容器元数据" class="header-anchor">#</a> 查看容器元数据</h5> <div class="language- extra-class"><pre class="language-text"><code>docker inspect 容器id
</code></pre></div><h5 id="进入当前正在运行的容器"><a href="#进入当前正在运行的容器" class="header-anchor">#</a> 进入当前正在运行的容器</h5> <div class="language- extra-class"><pre class="language-text"><code>docker exec -it 容器id [bashShell] # 进入容器，容器内部开启个新的终端

docker attach 容器id # 进入容器，不会开启新终端
</code></pre></div><h5 id="拷贝文件"><a href="#拷贝文件" class="header-anchor">#</a> 拷贝文件</h5> <div class="language- extra-class"><pre class="language-text"><code>docker cp 容器id:容器内路径 目标主机路径
</code></pre></div><h3 id="使用数据卷"><a href="#使用数据卷" class="header-anchor">#</a> 使用数据卷</h3> <div class="language- extra-class"><pre class="language-text"><code>-v 主机目录:容器内目录 # docker run时，指定-v命令，可以将主机目录映射到容器内目录
</code></pre></div><h4 id="具名挂载和匿名挂载"><a href="#具名挂载和匿名挂载" class="header-anchor">#</a> 具名挂载和匿名挂载</h4> <div class="language- extra-class"><pre class="language-text"><code> # docker在默认位置生成路径
 # 匿名挂载
 -v 容器内路径
 
 # 具名挂载
 -v 卷名:容器内路径
 
 # 查看挂载信息
 docker volume
 	-inspect 查看具体信息
 	-ls 列出所有卷
 	
 -v 卷名:容器内路径:ro # readonly 只读 只能在宿主机操作挂载目录，容器内无法操作
 -v 卷名:容器内路径:rw # 可读写
 
 docker run --volumes-from 已创建的容器id # 可以继承容器的挂载
</code></pre></div><h2 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h2> <h3 id="基础"><a href="#基础" class="header-anchor">#</a> 基础</h3> <ul><li>每个保留关键字（指令）都是大写</li> <li>从上到下执行</li> <li># 表示注释</li> <li>每个指令，多会创建一个镜像层，并且提交</li></ul> <div class="language- extra-class"><pre class="language-text"><code>FROM # 基础镜像
MAINTAINER # 镜像是谁写的 姓名+邮箱
RUN # 镜像构建时需要执行的命令
ADD # 添加内容
WORKDIR # 镜像的工作目录
VOLUME # 挂载的目录
EXPOSE # 指定对外端口
CMD # 指定容器启动时要执行的命令，只有最后一个会生效，会被替换
ENTRYPOINT # 指定容器启动时要执行的命令，可以追加命令
ONBUILD # 当构建一个被继承的DockerFile，会运行
COPY # 将文件拷贝到镜像中
ENV # 构建的时候设置环境变量
</code></pre></div><h3 id="构建镜像"><a href="#构建镜像" class="header-anchor">#</a> 构建镜像</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>docker build 
	-f dockerfiler名 <span class="token comment"># 如果文件名不是Dockerfile，则需要添加这个命令</span>
</code></pre></div><h2 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> Docker Compose</h2> <h2 id="docker-swarm"><a href="#docker-swarm" class="header-anchor">#</a> Docker Swarm</h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/15/2021, 7:57:45 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/linux/" class="prev router-link-active">
        Linux
      </a></span> <span class="next"><a href="/notes/linux/搭建代理服务器.html">
        搭建代理服务器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.e87d8fcf.js" defer></script><script src="/notes/assets/js/2.89b3a823.js" defer></script><script src="/notes/assets/js/13.b154d693.js" defer></script>
  </body>
</html>
